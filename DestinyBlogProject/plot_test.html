<!DOCTYPE HTML>
<head>

	<link href="javascript/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>
    <script src="javascript/nv.d3.js"></script>
</head>

<body>
	<div id="test1">
    	<svg></svg>
	</div>
	<script>
	    var test_data = {"First Light": [{"weaponKillsAutoRifle": 0.050802941617889841}, {"weaponKillsFusionRifle": 0.033093201260693379}, {"weaponKillsHandCannon": 0.084721596878283054}, {"weaponKillsHeavy": 0.10183100705387964}, {"weaponKillsMachinegun": 0.038571214167792287}, {"weaponKillsMelee": 0.07879333633498424}, {"weaponKillsPrimary": 0.28590724898694281}, {"weaponKillsPulseRifle": 0.067011856521086599}, {"weaponKillsRocketLauncher": 0.063259792886087352}, {"weaponKillsScoutRifle": 0.083370853969683328}, {"weaponKillsSecondary": 0.26407023863124718}, {"weaponKillsShotgun": 0.072790034518985441}, {"weaponKillsSideArm": 0.0021011556355995799}, {"weaponKillsSniper": 0.15608584721596877}, {"weaponKillsSuper": 0.065360948521686932}], "Shores of Time": [{"weaponKillsAutoRifle": 0.050188582023677285}, {"weaponKillsFusionRifle": 0.055303315073468855}, {"weaponKillsHandCannon": 0.16380238800170632}, {"weaponKillsHeavy": 0.090861479851499574}, {"weaponKillsMachinegun": 0.045044284042962068}, {"weaponKillsMelee": 0.076062120143432152}, {"weaponKillsPrimary": 0.34650521398674644}, {"weaponKillsPulseRifle": 0.08564538132425549}, {"weaponKillsRocketLauncher": 0.045817195808537506}, {"weaponKillsScoutRifle": 0.046868862637107364}, {"weaponKillsSecondary": 0.24164262756211805}, {"weaponKillsShotgun": 0.10084597938057246}, {"weaponKillsSideArm": 0.0037885347197878084}, {"weaponKillsSniper": 0.08170479838828891}, {"weaponKillsSuper": 0.069929508757554895}], "Asylum": [{"weaponKillsAutoRifle": 0.040655350150880565}, {"weaponKillsFusionRifle": 0.057493734620695923}, {"weaponKillsHandCannon": 0.17649331977018418}, {"weaponKillsHeavy": 0.073076201787835221}, {"weaponKillsMachinegun": 0.03544414577733325}, {"weaponKillsMelee": 0.087493677791858696}, {"weaponKillsPrimary": 0.32691925190518678}, {"weaponKillsPulseRifle": 0.07482084709064768}, {"weaponKillsRocketLauncher": 0.037632056010501971}, {"weaponKillsScoutRifle": 0.034949734893474346}, {"weaponKillsSecondary": 0.24718839327828512}, {"weaponKillsShotgun": 0.13541743622383742}, {"weaponKillsSideArm": 0.0038302636289758874}, {"weaponKillsSniper": 0.050446958804775899}, {"weaponKillsSuper": 0.071189484391959851}], "Black Shield": [{"weaponKillsAutoRifle": 0.055450901266862487}, {"weaponKillsFusionRifle": 0.070583613816746868}, {"weaponKillsHandCannon": 0.1798694747743485}, {"weaponKillsHeavy": 0.071074645787392088}, {"weaponKillsMachinegun": 0.035961395959253274}, {"weaponKillsMelee": 0.089591015007722596}, {"weaponKillsPrimary": 0.33600871358551543}, {"weaponKillsPulseRifle": 0.066691069467632064}, {"weaponKillsRocketLauncher": 0.035113249828138814}, {"weaponKillsScoutRifle": 0.033997268076672409}, {"weaponKillsSecondary": 0.24736405110303636}, {"weaponKillsShotgun": 0.12299904471962074}, {"weaponKillsSideArm": 0.030265425099768768}, {"weaponKillsSniper": 0.023515967466899983}, {"weaponKillsSuper": 0.068387361729860999}], "The Cauldron": [{"weaponKillsAutoRifle": 0.059151649570280011}, {"weaponKillsFusionRifle": 0.063909065705572504}, {"weaponKillsHandCannon": 0.16719711671749377}, {"weaponKillsHeavy": 0.064252841696700855}, {"weaponKillsMachinegun": 0.03187136124202939}, {"weaponKillsMelee": 0.10990851122816746}, {"weaponKillsPrimary": 0.33022456334904354}, {"weaponKillsPulseRifle": 0.066271139451067371}, {"weaponKillsRocketLauncher": 0.032381480454671471}, {"weaponKillsScoutRifle": 0.037604657610202381}, {"weaponKillsSecondary": 0.24048794011644026}, {"weaponKillsShotgun": 0.13871915719434433}, {"weaponKillsSideArm": 0.0098031605212087602}, {"weaponKillsSniper": 0.028056556695314667}, {"weaponKillsSuper": 0.068145273080121985}], "Rusted Lands": [{"weaponKillsAutoRifle": 0.042174841221217181}, {"weaponKillsFusionRifle": 0.057122308181150515}, {"weaponKillsHandCannon": 0.16500055177767545}, {"weaponKillsHeavy": 0.097154729876287635}, {"weaponKillsMachinegun": 0.046151445847777861}, {"weaponKillsMelee": 0.093212373519238015}, {"weaponKillsPrimary": 0.31833005437864126}, {"weaponKillsPulseRifle": 0.076183372845688713}, {"weaponKillsRocketLauncher": 0.051003284028509781}, {"weaponKillsScoutRifle": 0.034971288534059904}, {"weaponKillsSecondary": 0.23732909162173166}, {"weaponKillsShotgun": 0.13294036615205471}, {"weaponKillsSideArm": 0.0037444774665413433}, {"weaponKillsSniper": 0.043521939821985108}, {"weaponKillsSuper": 0.070566656645876705}], "Thieves' Den": [{"weaponKillsAutoRifle": 0.04540265893076309}, {"weaponKillsFusionRifle": 0.073725678679632312}, {"weaponKillsHandCannon": 0.16573257919717113}, {"weaponKillsHeavy": 0.073631268613802758}, {"weaponKillsMachinegun": 0.035824328615690952}, {"weaponKillsMelee": 0.10261515882347892}, {"weaponKillsPrimary": 0.29095465742020205}, {"weaponKillsPulseRifle": 0.052697982199411228}, {"weaponKillsRocketLauncher": 0.037806939998111799}, {"weaponKillsScoutRifle": 0.027121437092856592}, {"weaponKillsSecondary": 0.26663119136920344}, {"weaponKillsShotgun": 0.14770025662372438}, {"weaponKillsSideArm": 0.03183335765107756}, {"weaponKillsSniper": 0.013371898414769167}, {"weaponKillsSuper": 0.067211384137392388}], "Skyshock": [{"weaponKillsAutoRifle": 0.045693690707982931}, {"weaponKillsFusionRifle": 0.049670657442313269}, {"weaponKillsHandCannon": 0.11537346203239571}, {"weaponKillsHeavy": 0.11852189403040722}, {"weaponKillsMachinegun": 0.045900824392062639}, {"weaponKillsMelee": 0.079746468370686441}, {"weaponKillsPrimary": 0.28969717055387545}, {"weaponKillsPulseRifle": 0.055884667964704419}, {"weaponKillsRocketLauncher": 0.072621069638344582}, {"weaponKillsScoutRifle": 0.072745349848792412}, {"weaponKillsSecondary": 0.2565972078379386}, {"weaponKillsShotgun": 0.084261982683624018}, {"weaponKillsSideArm": 0.00095281494676664324}, {"weaponKillsSniper": 0.12171175276523469}, {"weaponKillsSuper": 0.070425452587099716}], "Pantheon": [{"weaponKillsAutoRifle": 0.054054810365091507}, {"weaponKillsFusionRifle": 0.055677853851463538}, {"weaponKillsHandCannon": 0.15689420368262971}, {"weaponKillsHeavy": 0.064427364140066792}, {"weaponKillsMachinegun": 0.033309702815140944}, {"weaponKillsMelee": 0.10912635486819768}, {"weaponKillsPrimary": 0.31651213551480328}, {"weaponKillsPulseRifle": 0.067794712982482325}, {"weaponKillsRocketLauncher": 0.031117661324925844}, {"weaponKillsScoutRifle": 0.037768408484599746}, {"weaponKillsSecondary": 0.25396899427270864}, {"weaponKillsShotgun": 0.13675540548103651}, {"weaponKillsSideArm": 0.011407943585247094}, {"weaponKillsSniper": 0.050127791354961475}, {"weaponKillsSuper": 0.06902598735145421}], "Bastion": [{"weaponKillsAutoRifle": 0.061507784339289821}, {"weaponKillsFusionRifle": 0.031137357159291355}, {"weaponKillsHandCannon": 0.092491755502722595}, {"weaponKillsHeavy": 0.13152849144873074}, {"weaponKillsMachinegun": 0.054758800521512385}, {"weaponKillsMelee": 0.090497737556561084}, {"weaponKillsPrimary": 0.27295037963033975}, {"weaponKillsPulseRifle": 0.047626351714088501}, {"weaponKillsRocketLauncher": 0.076769690927218345}, {"weaponKillsScoutRifle": 0.071324488074238829}, {"weaponKillsSecondary": 0.22908198481478642}, {"weaponKillsShotgun": 0.063425109287522055}, {"weaponKillsSideArm": 0.0044481938798987654}, {"weaponKillsSniper": 0.13007132448807424}, {"weaponKillsSuper": 0.064268732264744236}], "Twilight Gap": [{"weaponKillsAutoRifle": 0.036091016599890044}, {"weaponKillsFusionRifle": 0.057587419363769758}, {"weaponKillsHandCannon": 0.14679254685899387}, {"weaponKillsHeavy": 0.078712035216921841}, {"weaponKillsMachinegun": 0.037325032729113687}, {"weaponKillsMelee": 0.11179711509177995}, {"weaponKillsPrimary": 0.26935566164226982}, {"weaponKillsPulseRifle": 0.059232774202734609}, {"weaponKillsRocketLauncher": 0.041387002487808161}, {"weaponKillsScoutRifle": 0.027239323980651261}, {"weaponKillsSecondary": 0.27779206037186599}, {"weaponKillsShotgun": 0.17091914425727653}, {"weaponKillsSideArm": 0.0040421938591876849}, {"weaponKillsSniper": 0.045243302891632024}, {"weaponKillsSuper": 0.073036352058473378}], "The Anomaly": [{"weaponKillsAutoRifle": 0.032580061983471076}, {"weaponKillsFusionRifle": 0.054241993801652892}, {"weaponKillsHandCannon": 0.15096203512396694}, {"weaponKillsHeavy": 0.083690599173553717}, {"weaponKillsMachinegun": 0.039817923553719006}, {"weaponKillsMelee": 0.1029764979338843}, {"weaponKillsPrimary": 0.27756973140495866}, {"weaponKillsPulseRifle": 0.064979338842975201}, {"weaponKillsRocketLauncher": 0.043872675619834711}, {"weaponKillsScoutRifle": 0.029048295454545455}, {"weaponKillsSecondary": 0.27629132231404957}, {"weaponKillsShotgun": 0.17725335743801654}, {"weaponKillsSideArm": 0.0040934917355371905}, {"weaponKillsSniper": 0.040702479338842974}, {"weaponKillsSuper": 0.067045454545454547}], "Widow's Court": [{"weaponKillsAutoRifle": 0.048448591454975667}, {"weaponKillsFusionRifle": 0.063190320996473051}, {"weaponKillsHandCannon": 0.16107861958123129}, {"weaponKillsHeavy": 0.076601634001517926}, {"weaponKillsMachinegun": 0.038617795437296307}, {"weaponKillsMelee": 0.10496897182909952}, {"weaponKillsPrimary": 0.30937095406044912}, {"weaponKillsPulseRifle": 0.063190320996473051}, {"weaponKillsRocketLauncher": 0.03798383856422162}, {"weaponKillsScoutRifle": 0.036653422027769098}, {"weaponKillsSecondary": 0.26453859547301217}, {"weaponKillsShotgun": 0.14480110719228537}, {"weaponKillsSideArm": 0.023786776195365865}, {"weaponKillsSniper": 0.032760391088887897}, {"weaponKillsSuper": 0.066101165230590647}], "Firebase Delphi": [{"weaponKillsAutoRifle": 0.054400960103035446}, {"weaponKillsFusionRifle": 0.069197669993853003}, {"weaponKillsHandCannon": 0.16580803793577847}, {"weaponKillsHeavy": 0.079442671896496203}, {"weaponKillsMachinegun": 0.042619207914995759}, {"weaponKillsMelee": 0.09374176740918537}, {"weaponKillsPrimary": 0.31273600093668591}, {"weaponKillsPulseRifle": 0.065787547931973181}, {"weaponKillsRocketLauncher": 0.036823463981500451}, {"weaponKillsScoutRifle": 0.02673945496589878}, {"weaponKillsSecondary": 0.24444574539706701}, {"weaponKillsShotgun": 0.14574246992360157}, {"weaponKillsSideArm": 0.00381992213798554}, {"weaponKillsSniper": 0.025685683341626905}, {"weaponKillsSuper": 0.076969235722858062}], "The Burning Shrine": [{"weaponKillsAutoRifle": 0.0468736789299544}, {"weaponKillsFusionRifle": 0.060671991342235346}, {"weaponKillsHandCannon": 0.19023408656637339}, {"weaponKillsHeavy": 0.086436732370232167}, {"weaponKillsMachinegun": 0.043068997198626932}, {"weaponKillsMelee": 0.081346913698545201}, {"weaponKillsPrimary": 0.35976506794879742}, {"weaponKillsPulseRifle": 0.085433423706267303}, {"weaponKillsRocketLauncher": 0.043367735171605235}, {"weaponKillsScoutRifle": 0.037223878746202366}, {"weaponKillsSecondary": 0.21943713256638464}, {"weaponKillsShotgun": 0.11506484868639841}, {"weaponKillsSideArm": 0.0034270318409586669}, {"weaponKillsSniper": 0.040273260696792233}, {"weaponKillsSuper": 0.066793301505526648}], "Blind Watch": [{"weaponKillsAutoRifle": 0.054125346837711058}, {"weaponKillsFusionRifle": 0.057584391991937191}, {"weaponKillsHandCannon": 0.14574027299082981}, {"weaponKillsHeavy": 0.093817267852032496}, {"weaponKillsMachinegun": 0.044532095708544342}, {"weaponKillsMelee": 0.093456432206447754}, {"weaponKillsPrimary": 0.29269992161156666}, {"weaponKillsPulseRifle": 0.061404272791748059}, {"weaponKillsRocketLauncher": 0.049285172143488161}, {"weaponKillsScoutRifle": 0.031430028991277732}, {"weaponKillsSecondary": 0.25903022309596985}, {"weaponKillsShotgun": 0.1389341661585935}, {"weaponKillsSideArm": 0.0029240129900832412}, {"weaponKillsSniper": 0.059587651955355918}, {"weaponKillsSuper": 0.082805559357463698}]}

	    nv.addGraph({
	        generate: function() {
	            var width = nv.utils.windowSize().width,
	                height = nv.utils.windowSize().height;

	            var chart = nv.models.multiBarChart()
	                .width(width)
	                .height(height)
	                .stacked(true)
	                ;

	            chart.dispatch.on('renderEnd', function(){
	                console.log('Render Complete');
	            });

	            var svg = d3.select('#test1 svg').datum(test_data);
	            console.log('calling chart');
	            svg.transition().duration(0).call(chart);

	            return chart;
	        },
	        callback: function(graph) {
	            nv.utils.windowResize(function() {
	                var width = nv.utils.windowSize().width;
	                var height = nv.utils.windowSize().height;
	                graph.width(width).height(height);

	                d3.select('#test1 svg')
	                    .attr('width', width)
	                    .attr('height', height)
	                    .transition().duration(0)
	                    .call(graph);

	            });
	        }
	    });

	</script>


</body>
